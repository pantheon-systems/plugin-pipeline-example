name: Build, Tag, and Release
on:
  push:
    branches:
      - 'release'

permissions:
  pull-requests: write
  contents: write

jobs:
  tag:
    name: Tag with Assets
    runs-on: ubuntu-latest
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
    - name: Build, tag, and release
      uses: pantheon-systems/plugin-release-actions/build-tag-release@main
      with:
        gh_token: ${{ secrets.GITHUB_TOKEN }}
        build_node_assets: "true"
        build_composer_assets: "true"
  prepare_dev:
    name: Update Dev environment for the next versions
    runs-on: ubuntu-latest
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
    - name: Prepare Dev
      uses: pantheon-systems/plugin-release-actions/prepare-dev@main
